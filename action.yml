name: Deposit API calls
description: Deposit with Open Journals and Crossref

runs:
  using: "composite"
  steps:
    - name: Install Ruby
      uses: ruby/setup-ruby@v1
      with:
        ruby-version: 3.0.2
        bundler-cache: true
        cache-version: upload-crossref
        bundler: Gemfile.lock
        working-directory: ${{ github.action_path }}
    - name: Deposit with Open Journals
      id: deposit_OJ
      shell: bash
      env:
        BUNDLE_GEMFILE: ${{ github.action_path }}/Gemfile
      run: |
        bundle exec ruby ${{ github.action_path }}/deposit_with_openjournals.rb
    - name: Deposit with Crossref
      id: deposit_crossref
      shell: bash
      env:
        BUNDLE_GEMFILE: ${{ github.action_path }}/Gemfile
      run: |
        bundle exec ruby ${{ github.action_path }}/deposit_with_crossref.rb
branding:
  icon: archive
  color: green
